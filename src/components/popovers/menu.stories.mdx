import { Meta, Preview, Story, Props } from "@storybook/addon-docs/blocks";
import {
  withKnobs,
  array,
  text,
  boolean,
  optionsKnob as options
} from "@storybook/addon-knobs";
import { action } from '@storybook/addon-actions';

import Menu from './Menu';
import MenuItem from './MenuItem';

import Button from '../interactive/Button';

import Flex from '../layout/Flex';
import FlexItem from '../layout/FlexItem';

import CloneIcon from 'lib/icons/react/CloneIcon';
import TrashIcon from 'lib/icons/react/TrashIcon';
import EditIcon from 'lib/icons/react/EditIcon';
import FundingIcon from 'lib/icons/react/FundingIcon';

<Meta title="Popovers|Menu" component={Menu} decorators={[withKnobs]} />

# Menu

Renders a basic keyboard navigable dropdown menu following the [WAI-ARIA pattern for "menubutton"](https://www.w3.org/TR/wai-aria-practices-1.1/#menubutton).

### When to use Menu
Only use a `Menu` for dropdowns that contain actions the user can take. If a dropdown includes any other type of content (forms, arbitrary content), use a `Popover` component instead.

### Positioning
The menu will automatically position above or below the trigger element based on its position in the viewport.

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <div style={{ padding: '2rem' }}>
    <Menu
      trigger={<Button label={text('label', 'Menu trigger')} hasCaret />}>
      {array('Menu Items', ['First', 'Second', 'Third', 'Fourth']).map((item) => (
        <MenuItem onSelect={ action(`clicked ${item}`)}>{item}</MenuItem>
      ))}
    </Menu>
  </div>
</Story>

<Preview isExpanded>
  <Menu trigger={<Button label="Menu trigger" hasCaret />}>
    <MenuItem onSelect={() => { alert('copy') }}>
      Copy
    </MenuItem>
    <MenuItem onSelect={() => { alert('delete') }}>
      Delete
    </MenuItem>
  </Menu>
</Preview>

## Menu Props

<Props of={Menu} />

## MenuItem Props

<Props of={MenuItem} />

## Trigger element

The Menu trigger can be any JSX, but a `Button` with the `hasCaret` prop enabled is recommended.

<Preview>
  <Story name="Trigger element">
    <Flex>
      <FlexItem>
        <Menu
          trigger={<Button theme="outlined" label="Recommended trigger" hasCaret />}>
            <MenuItem onSelect={() => { alert('🍰') }}>Cake</MenuItem>
            <MenuItem onSelect={() => { alert('🍕') }}>Pizza</MenuItem>
            <MenuItem onSelect={() => { alert('☠️') }}>Tide pod</MenuItem>
        </Menu>
      </FlexItem>
      <FlexItem>
        <Menu
          trigger={<div className="bgColor--orange inverted padding--all--half">any jsx will work</div>}>
            <MenuItem onSelect={() => { alert('🍰') }}>Cake</MenuItem>
            <MenuItem onSelect={() => { alert('🍕') }}>Pizza</MenuItem>
            <MenuItem onSelect={() => { alert('☠️') }}>Tide pod</MenuItem>
        </Menu>
      </FlexItem>
    </Flex>
  </Story>
</Preview>

## Custom menu items

`MenuItem` components will accept a plain string or any JSX node.

<Preview>
  <Story name="Custom items">
    <Menu
      trigger={<Button hasCaret label="actions" theme="outlined" />}>
        <MenuItem onSelect={() => { alert('Delete') }}>
          <div className="color--primary">
            <Flex align="center">
              <FlexItem shrink><TrashIcon /></FlexItem>
              <FlexItem>Delete</FlexItem>
            </Flex>
          </div>
        </MenuItem>
        <MenuItem onSelect={() => { alert('Edit') }}>
          <div className="color--primary">
            <Flex align="center">
              <FlexItem shrink><EditIcon /></FlexItem>
              <FlexItem>Edit</FlexItem>
            </Flex>
          </div>
        </MenuItem>
        <MenuItem onSelect={() => { alert('Clone') }}>
          <div className="color--primary">
            <Flex align="center">
              <FlexItem shrink><CloneIcon /></FlexItem>
              <FlexItem>Clone</FlexItem>
            </Flex>
          </div>
        </MenuItem>
        <MenuItem onSelect={() => { alert('Bribe') }}>
          <div className="color--primary">
            <Flex align="center">
              <FlexItem shrink><FundingIcon /></FlexItem>
              <FlexItem>Bribe</FlexItem>
            </Flex>
          </div>
        </MenuItem>
    </Menu>
  </Story>
</Preview>


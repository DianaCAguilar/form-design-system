import { Meta, Story, Preview, Props, Source } from "@storybook/addon-docs/blocks";
import { withKnobs, text, boolean } from '@storybook/addon-knobs';
import { Info } from '../util/storybook';

import { useState } from 'react'

export const State = ({ render, children, initialValue }) => {
  const [value, setValue] = useState(initialValue)
  return render(value, setValue)
}

import Checkbox from './Checkbox';

<Meta title="Forms|Checkbox" decorators={[withKnobs]} component={Checkbox} />

# Checkbox

Custom checkbox component with optional label.

<Story name="Knobs">
  <Checkbox
    disabled={boolean('disabled', false)}
    name="knobs"
    label={text('label', 'I agree to receive spam')}
  />
</Story>

<Source
  language="jsx"
  code='<Checkbox label="I agree to receive spam" />'
/>

<Info type="info">
  Additional props will be spread on the `input` element.
</Info>

<Props of={Checkbox} />

Component is uncontrolled by default, but you can utilize the `checked` prop to turn it into a controlled component.

## Managing checked state

`Checkbox` will render as unchecked by default. Use the `defaultChecked` boolean prop to set the
initial state to checked.

<Preview>
  <Story name="Managing checked state">
    <Checkbox defaultChecked name="default-checked" label="Checked by default" />
  </Story>
</Preview>

## Preventing user interaction

Use the `disabled` prop to prevent the user from changing the chekced state of the
checkbox.

<Preview>
  <Story name="Disabled checkboxes">
    <React.Fragment>
      <div>
        <Checkbox disabled name="disabled-unchecked" label="Disabled unchecked" />
      </div>
      <div>
        <Checkbox disabled defaultChecked name="disabled-checked" label="Disabled checked" />
      </div>
    </React.Fragment>
  </Story>
</Preview>

## Checkboxes without labels

You should always render a label, but you can bring your own

<Preview>
  <Story name="Checkbox without label">
    <Checkbox name="no-label" />
  </Story>
</Preview>

## Indeterminate checkbox

Passing the `indeterminate` boolean prop will set `indeterminate` attribute of the
underlying input element and render the `CheckIndeterminate` icon when the checkbox is
checked.

<Preview>
  <Story name="Indeterminate checkboxes">
    <Checkbox checked="mixed" name="notsureif" label="Indeterminate checkbox" />
  </Story>
</Preview>

## Reading the value of a `Checkbox`

The `onChange` prop will be spread on the `input` element the `Checkbox` component
renders. Read the `checked` attribute of the event `currentTarget`.

<Preview>
  <Story name="Reading the value of a Checkbox">
    <Checkbox label="Option one" onChange={(e) => { console.log(e.currentTarget.checked) }} />
  </Story>
</Preview>

<Story name="Controlled Checked">
  <State
    initialValue={true}
    render={(value, setValue) => (
      <Checkbox label="thing" checked={value} onChange={() => setValue(!value)}/>
    )}
  />
</Story>

<Story name="Controlled Unchecked">
  <State
    initialValue={false}
    render={(value, setValue) => (
      <Checkbox label="thing" checked={value} onChange={() => setValue(!value)}/>
    )}
  />
</Story>

<Story name="Uncontrolled">
  <Checkbox label="thing" />
</Story>

<Story name="Uncontrolled Default Checked">
  <Checkbox label="thing" defaultChecked />
</Story>

<Story name="Custom label">
  <label>
    <Checkbox />
    <span className="padding--left--half">thing</span>
  </label>
</Story>

<Story name="Custom label pt.2">
  <>
    <Checkbox id="blah" />
    <label className="padding--left--half display--inlineBlock" htmlFor="blah">thing</label>
  </>
</Story>


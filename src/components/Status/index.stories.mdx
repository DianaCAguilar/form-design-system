import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { withKnobs, text, optionsKnob as options } from '@storybook/addon-knobs';
import ImportPath from 'util/storybook-docs/ImportPath';
import { arrayToOptions } from 'util/storybook-docs/knobHelpers';

import Flex from 'components/Flex';
import FlexItem from 'components/FlexItem';
import GapList from 'components/GapList';

import Status, { VALID_TYPES } from '.';

<Meta title="Components/Status" decorators={[withKnobs]} component={Status} />

# Status

<ImportPath component={Status}  />

Renders a status bubble with an optional label. The bubble will be centered within the
parent container you place it in.

To render a `Status` in the top right corner of an element, use the `Updatable` component.

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <Status
    label={text('label', '42')}
    type={options('type', arrayToOptions(VALID_TYPES), 'update', {
      display: 'inline-radio',
    })}
  />
</Story>

<Preview isExpanded>
  <Status
    label="42"
  />
</Preview>

<Props of={Status} />

### Variations

Status uses the `update` type by default, which is used to indicate "newness".

The `count` type can be used to show an amount, but does not indicate "newness" the way
that the `update` type does.

Either variation will become a filled dot when the `label` is left undefined.

<Preview>
  <Story name="Variations">
    <GapList
      items={[
        <Status label="42" />,
        <Status label="42" type="count" />,
        <Status />,
        <Status type="count" />,
      ]}
    />
  </Story>
</Preview>

### Table rows with Status

To indicate "newness" on a table row, place the indicator to the left of the first column.
The bubble will center itself within the nearest parent.

<Preview>
  <Story name="With table rows">
    <Flex>
      <FlexItem shrink>
        <div style={{width: '100%', height: '32px'}}>
          <Status />
        </div>
      </FlexItem>
      <FlexItem>
        <div className="bgColor--haze" style={{width: '100%', height: '32px'}} />
      </FlexItem>
    </Flex>
  </Story>
</Preview>

import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { withKnobs, text, optionsKnob as options } from '@storybook/addon-knobs';
import ImportPath from 'util/storybook-docs/ImportPath';
import { arrayToOptions } from 'util/storybook-docs/knobHelpers';

import Flex from 'components/Flex';
import FlexItem from 'components/FlexItem';
import GapList from 'components/GapList';

import Indicator, { VALID_TYPES } from '.';

<Meta title="Components/Indicator" decorators={[withKnobs]} component={Indicator} />

# Indicator

<ImportPath component={Indicator}  />

Renders an indicator bubble with an optional label. The bubble will be centered within the
parent container you place it in.

To render a `Indicator` in the top right corner of an element, use the `Updatable` component.

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <Indicator
    label={text('label', '42')}
    type={options('type', arrayToOptions(VALID_TYPES), 'update', {
      display: 'inline-radio',
    })}
  />
</Story>

<Preview isExpanded>
  <Indicator
    label="42"
  />
</Preview>

<Props of={Indicator} />

### Variations

Indicator uses the `update` type by default, which is used to notify users of new updates.

The `count` type can be used to show a count of total items.

When the `label` is left undefined, both types will collapse into a dot.

<Preview>
  <Story name="Variations">
    <GapList
      items={[
        <Indicator label="42" />,
        <Indicator label="42" type="count" />,
        <Indicator />,
        <Indicator type="count" />,
      ]}
    />
  </Story>
</Preview>

### Table rows with Indicator

To indicate a table row is "new", place the indicator to the left of the first column.
The bubble will center itself within the nearest parent.

<Preview>
  <Story name="With table rows">
    <Flex>
      <FlexItem shrink>
        <div style={{width: '100%', height: '32px'}}>
          <Indicator />
        </div>
      </FlexItem>
      <FlexItem>
        <div className="bgColor--haze" style={{width: '100%', height: '32px'}} />
      </FlexItem>
    </Flex>
  </Story>
</Preview>

import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { withKnobs, text, optionsKnob as options } from '@storybook/addon-knobs';
import ImportPath from 'util/storybook-docs/ImportPath';
import { arrayToOptions } from 'util/storybook-docs/knobHelpers';

import Flex from 'components/Flex';
import FlexItem from 'components/FlexItem';
import GapList from 'components/GapList';

import Count, { VALID_TYPES } from '.';

<Meta title="Components/Count" decorators={[withKnobs]} component={Count} />

# Count

<ImportPath component={Count}  />

Renders a count bubble with an optional label. The bubble will be centered within the
parent container you place it in.

To render a `Count` in the top right corner of an element, use the `Updatable` component.

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <Count
    label={text('label', '42')}
    type={options('type', arrayToOptions(VALID_TYPES), 'notification', {
      display: 'inline-radio',
    })}
  />
</Story>

<Preview isExpanded>
  <Count
    label="42"
  />
</Preview>

<Props of={Count} />

### Variations

Count uses the `notification` type by default, which is used to indicate a count of
_new_ items behind a link.

The `passive` type can be used to show total items.

When the `label` is left undefined, both types will collapse into a dot, indicating there
is at least one item.

<Preview>
  <Story name="Variations">
    <GapList
      items={[
        <Count label="42" />,
        <Count label="42" type="passive" />,
        <Count />,
        <Count type="passive" />,
      ]}
    />
  </Story>
</Preview>

### Table rows with Count

To indicate a table row is "new", place the indicator to the left of the first column.
The bubble will center itself within the nearest parent.

<Preview>
  <Story name="With table rows">
    <Flex>
      <FlexItem shrink>
        <div style={{width: '100%', height: '32px'}}>
          <Count />
        </div>
      </FlexItem>
      <FlexItem>
        <div className="bgColor--haze" style={{width: '100%', height: '32px'}} />
      </FlexItem>
    </Flex>
  </Story>
</Preview>

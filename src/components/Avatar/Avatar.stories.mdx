import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { withKnobs, text, boolean, optionsKnob as options } from '@storybook/addon-knobs';
import StarFilledIcon from 'lib/icons/react/StarFilledIcon';
import ImportPath from 'util/storybook-docs/ImportPath';
import { arrayToOptions } from 'util/storybook-docs/knobHelpers';
import { StoryWrapper, StoryItem } from 'util/storybook-docs/StoryLayout';
import { action } from '@storybook/addon-actions';

import Avatar, { BG_COLORS, SIZES, RADII, INITIALS_LENGTH } from '.';

<Meta title="Components/Avatar" decorators={[withKnobs]} component={Avatar} />

# Avatar

<ImportPath component={Avatar} />

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <StoryWrapper>
    <StoryItem>
      <Avatar
        bgColor={options('bgColor', arrayToOptions(BG_COLORS), undefined, {
          display: 'inline-radio',
        })}
        radius={options('radius', arrayToOptions(RADII), undefined, {
          display: 'inline-radio',
        })}
        size={options('size', arrayToOptions(SIZES), undefined, {
          display: 'inline-radio',
        })}
        name={text('name', 'Samuel Jackson')}
        imgUrl={text('imgUrl', undefined)}
        initialsLength={options('initials', arrayToOptions(INITIALS_LENGTH), undefined, {
          display: 'inline-radio',
        })}
        PlaceholderIcon={boolean("PlaceholderIcon", false) ? StarFilledIcon : undefined}
        href={text('href', '')}
      />
    </StoryItem>
    <StoryItem>
      <Avatar
        bgColor={options('bgColor', arrayToOptions(BG_COLORS), undefined, {
          display: 'inline-radio',
        })}
        radius={options('radius', arrayToOptions(RADII), undefined, {
          display: 'inline-radio',
        })}
        size={options('size', arrayToOptions(SIZES), undefined, {
          display: 'inline-radio',
        })}
        name={text('name', 'Samuel Jackson')}
        imgUrl="http://placeimg.com/80/81/animals"
        initialsLength={options('initials', arrayToOptions(INITIALS_LENGTH), undefined, {
          display: 'inline-radio',
        })}
        PlaceholderIcon={boolean("PlaceholderIcon", false) ? StarFilledIcon : undefined}
        href={text('href', '')}
      />
    </StoryItem>
  </StoryWrapper>
</Story>

<Preview isExpanded>
  <Avatar name='Samuel Jackson' />
</Preview>


_Displaying an Avatar with an image, and without an image, for visualization purposes_

<Props of={Avatar} />

### Product Cases

_Pay note to `initialsLength` in these cases._

<Preview>
  <Story name="Product Cases">
    <StoryWrapper>
      <StoryItem>
        <p>Entity Avatar</p>
      </StoryItem>
      <StoryItem>
        <Avatar name="Hello Impecable" bgColor="navy" initialsLength={1} radius="square" />
      </StoryItem>
      <StoryItem>
        <p>User Avatar</p>
      </StoryItem>
      <StoryItem>
        <Avatar name="Hello Impecable" />
      </StoryItem>
    </StoryWrapper>
  </Story>
</Preview>

### Colors
Accepted colors are based off FDS `bgColor--{color}` classes: https://cbinsights.github.io/form-design-system/fds-styles/#background-colors

<Preview>
  <Story name="Colors">
    <StoryWrapper>
      <StoryItem>
        <Avatar name="default" />
      </StoryItem>
      {BG_COLORS.map(bgColor => (
        <StoryItem>
          <Avatar name={`${bgColor.slice(0,1)} ${bgColor.slice(1,2)}`} bgColor={bgColor} />
        </StoryItem>
      ))}
      <br />
    </StoryWrapper>
  </Story>
</Preview>

### Images
Initials will show either if you don't pass an image, the image doesn't load, or it hasn't loaded yet.

<Preview>
  <Story name="Variations">
    <StoryWrapper>
      <StoryItem>
        <Avatar name="Hello Impecable" imgUrl="http://placeimg.com/80/81/animals" />
      </StoryItem>
      <StoryItem>
        <Avatar name="Hello Impecable" imgUrl="invalid url" />
      </StoryItem>
      <br />
    </StoryWrapper>
  </Story>
</Preview>

### Sizes

<Preview>
  <Story name="Sizes">
    <StoryWrapper>
      {SIZES.map(size => (
        <StoryItem>
          <Avatar name="Hello Impecable " size={size} />
        </StoryItem>
      ))}
      <br />
    </StoryWrapper>
  </Story>
</Preview>

### Radii

<Preview>
  <Story name="Radii">
    <StoryWrapper>
      {RADII.map(radius => (
        <StoryItem>
          <Avatar name="Hello Impecable " radius={radius} />
        </StoryItem>
      ))}
    </StoryWrapper>
  </Story>
</Preview>

### Button

Avatar will render as a button if you pass it a href, onClick, or Link to it.

<Preview>
  <Story name="Button">
    <StoryWrapper>
      <StoryItem>
        <Avatar name="Hello Impecable" href="#" />
      </StoryItem>
      <StoryItem>
        <Avatar name="Hello Impecable" onClick={action('avatar-click')} />
      </StoryItem>
      <StoryItem>
        <Avatar name="Hello Impecable" imgUrl="http://placeimg.com/80/81/animals" href="#" />
      </StoryItem>
    </StoryWrapper>
  </Story>
</Preview>

### Placeholder

<Preview>
  <Story name="Placeholder">
    <StoryWrapper>
      <StoryItem>
        <Avatar PlaceholderIcon={StarFilledIcon} />
      </StoryItem>
    </StoryWrapper>
  </Story>
</Preview>



